{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\App.vue","mtime":1716949481752},{"path":"E:\\code\\vue\\screen-vue-datav\\babel.config.js","mtime":1710123821000},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRTovY29kZS92dWUvc2NyZWVuLXZ1ZS1kYXRhdi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L2NvZGUvdnVlL3NjcmVlbi12dWUtZGF0YXYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVnaW9uOiB7CiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBpZDogbnVsbCwKICAgICAgICBpcDogbnVsbCwKICAgICAgICBsYXQ6IG51bGwsCiAgICAgICAgbG9uOiBudWxsLAogICAgICAgIEpXRDogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY2hlY2tDb29raWVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja0Nvb2tpZURhdGE6IGZ1bmN0aW9uIGNoZWNrQ29va2llRGF0YSgpIHsKICAgICAgdmFyIHJlZ2lvbkZyb21Db29raWUgPSB0aGlzLiRjb29raWUuZ2V0KCdyZWdpb24nKTsKICAgICAgY29uc29sZS5sb2cocmVnaW9uRnJvbUNvb2tpZSk7CiAgICAgIC8vdGhpcy5nZXRMb2NhdGlvbkRhdGEoKTsKICAgICAgaWYgKHJlZ2lvbkZyb21Db29raWUpIHsKICAgICAgICAvLyDku44gY29va2llIOS4reivu+WPliByZWdpb24g5L+h5oGvCiAgICAgICAgLy90aGlzLnJlZ2lvbj1yZWdpb25Gcm9tQ29va2llOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TG9jYXRpb25EYXRhJywgSlNPTi5wYXJzZShyZWdpb25Gcm9tQ29va2llKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoImNvb2tpZSDkuK3msqHmnIkgcmVnaW9uIOS/oeaBryzliJnosIPnlKggZ2V0TG9jYXRpb25EYXRhIOaWueazlSIpOwogICAgICAgIC8vIOWmguaenCBjb29raWUg5Lit5rKh5pyJIHJlZ2lvbiDkv6Hmga8s5YiZ6LCD55SoIGdldExvY2F0aW9uRGF0YSDmlrnms5UKICAgICAgICB0aGlzLmdldExvY2F0aW9uRGF0YSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0TG9jYXRpb25EYXRhOiBmdW5jdGlvbiBnZXRMb2NhdGlvbkRhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIjMtYXBwLWdldExvY2F0aW9uRGF0YSIpOwogICAgICAgICAgICAgIGF4aW9zLmdldCgnL2FwaS1yZWdpb24nKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXMucmVnaW9uID0gewogICAgICAgICAgICAgICAgICBuYW1lOiByZXNwb25zZS5kYXRhLnJlZ2lvbiwKICAgICAgICAgICAgICAgICAgaXA6IHJlc3BvbnNlLmRhdGEuaXAsCiAgICAgICAgICAgICAgICAgIGxhdDogcmVzcG9uc2UuZGF0YS5sYXRpdHVkZSwKICAgICAgICAgICAgICAgICAgbG9uOiByZXNwb25zZS5kYXRhLmxvbmdpdHVkZSwKICAgICAgICAgICAgICAgICAgSldEOiByZXNwb25zZS5kYXRhLmxhdGl0dWRlICsgJywnICsgcmVzcG9uc2UuZGF0YS5sb25naXR1ZGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiNC1hcHAiKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnJlZ2lvbik7CiAgICAgICAgICAgICAgICBfdGhpcy5nZXRHZW9JbmZvKF90aGlzLnJlZ2lvbi5uYW1lKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIElQIGFuZCBsb2NhdGlvbiBpbmZvOicsIGVycm9yKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEdlb0luZm86IGZ1bmN0aW9uIGdldEdlb0luZm8obG9jYXRpb24pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGF4aW9zLmdldCgiaHR0cHM6Ly9nZW9hcGkucXdlYXRoZXIuY29tL3YyL2NpdHkvbG9va3VwP2xvY2F0aW9uPSIuY29uY2F0KGxvY2F0aW9uLCAiJmtleT01ZjAxN2M2ZDdlZGI0YTdiYTlmZTRmNDkxYTI5MDBjYSIpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5yZWdpb24uaWQgPSByZXNwb25zZS5kYXRhLmxvY2F0aW9uWzBdLmlkOwogICAgICAgIGNvbnNvbGUubG9nKCI1LWFwcCIpOwogICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5yZWdpb24uaWQpOwogICAgICAgIF90aGlzMi5zdG9yZURhdGEoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ2VvIGluZm86JywgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBzdG9yZURhdGE6IGZ1bmN0aW9uIHN0b3JlRGF0YSgpIHsKICAgICAgLy8g5bCGIGlwSW5mbyDlkowgZ2VvSW5mbyDlrZjlgqjliLAgY29va2llIOWSjCBWdWV4IHN0b3JlIOS4rQogICAgICB0aGlzLiRjb29raWUuc2V0KCJyZWdpb24iLCBKU09OLnN0cmluZ2lmeSh0aGlzLnJlZ2lvbiksICc3ZCcpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldExvY2F0aW9uRGF0YScsIHRoaXMucmVnaW9uKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["axios","name","data","region","id","ip","lat","lon","JWD","created","checkCookieData","methods","regionFromCookie","$cookie","get","console","log","$store","commit","JSON","parse","alert","getLocationData","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","then","response","latitude","longitude","getGeoInfo","catch","error","stop","location","_this2","concat","storeData","set","stringify"],"sources":["src/App.vue"],"sourcesContent":["<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-05-28 23:32:07\n * @FilePath: \\screen-vue-datav\\src\\App.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-05-28 08:06:00\n * @FilePath: \\screen-vue-datav\\src\\App.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nexport default {\n  name: '',\n  data() {\n    return {\n      region:{\n        name:null,\n        id:null,\n        ip:null,\n        lat:null,\n        lon:null,\n        JWD:null\n      },\n    }\n  },\n  created() {\n    this.checkCookieData();\n  },\n  methods: {\n    checkCookieData() {\n      const regionFromCookie = this.$cookie.get('region');\n      console.log(regionFromCookie)\n      //this.getLocationData();\n      if (regionFromCookie) {\n        // 从 cookie 中读取 region 信息\n        //this.region=regionFromCookie;\n        this.$store.commit('setLocationData', JSON.parse(regionFromCookie));\n      } else {\n        alert(\"cookie 中没有 region 信息,则调用 getLocationData 方法\")\n        // 如果 cookie 中没有 region 信息,则调用 getLocationData 方法\n        this.getLocationData();\n      }\n    },\n    async getLocationData() {\n      console.log(\"3-app-getLocationData\");\n  \n      axios.get('/api-region')\n        .then(response => {\n          this.region = {\n            name: response.data.region,\n            ip: response.data.ip,\n            lat: response.data.latitude,\n            lon: response.data.longitude,\n            JWD: response.data.latitude + ',' + response.data.longitude\n          };\n          console.log(\"4-app\");\n          console.log(this.region);\n          this.getGeoInfo(this.region.name);\n        })\n        .catch(error => {\n          console.error('Error fetching IP and location info:', error);\n        });\n    },\n    getGeoInfo(location) {\n      axios.get(`https://geoapi.qweather.com/v2/city/lookup?location=${location}&key=5f017c6d7edb4a7ba9fe4f491a2900ca`)\n        .then(response => {\n          this.region.id = response.data.location[0].id;\n          console.log(\"5-app\");\n          console.log(this.region.id);\n          this.storeData();\n        })\n        .catch(error => {\n          console.error('Error fetching geo info:', error);\n        });\n    },\n    storeData() {\n      // 将 ipInfo 和 geoInfo 存储到 cookie 和 Vuex store 中\n      this.$cookie.set(\"region\", JSON.stringify(this.region), '7d');\n      this.$store.commit('setLocationData', this.region);\n    }\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n#app {\n  width: 100vw;\n  height: 100vh;\n  background-color: #020308;\n  overflow: hidden;\n}\n</style>\n"],"mappings":";;;;;AAwBA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,MAAA;QACAF,IAAA;QACAG,EAAA;QACAC,EAAA;QACAC,GAAA;QACAC,GAAA;QACAC,GAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAD,eAAA,WAAAA,gBAAA;MACA,IAAAE,gBAAA,QAAAC,OAAA,CAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA,CAAAJ,gBAAA;MACA;MACA,IAAAA,gBAAA;QACA;QACA;QACA,KAAAK,MAAA,CAAAC,MAAA,oBAAAC,IAAA,CAAAC,KAAA,CAAAR,gBAAA;MACA;QACAS,KAAA;QACA;QACA,KAAAC,eAAA;MACA;IACA;IACAA,eAAA,WAAAA,gBAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAjB,OAAA,CAAAC,GAAA;cAEAhB,KAAA,CAAAc,GAAA,gBACAmB,IAAA,WAAAC,QAAA;gBACAX,KAAA,CAAApB,MAAA;kBACAF,IAAA,EAAAiC,QAAA,CAAAhC,IAAA,CAAAC,MAAA;kBACAE,EAAA,EAAA6B,QAAA,CAAAhC,IAAA,CAAAG,EAAA;kBACAC,GAAA,EAAA4B,QAAA,CAAAhC,IAAA,CAAAiC,QAAA;kBACA5B,GAAA,EAAA2B,QAAA,CAAAhC,IAAA,CAAAkC,SAAA;kBACA5B,GAAA,EAAA0B,QAAA,CAAAhC,IAAA,CAAAiC,QAAA,SAAAD,QAAA,CAAAhC,IAAA,CAAAkC;gBACA;gBACArB,OAAA,CAAAC,GAAA;gBACAD,OAAA,CAAAC,GAAA,CAAAO,KAAA,CAAApB,MAAA;gBACAoB,KAAA,CAAAc,UAAA,CAAAd,KAAA,CAAApB,MAAA,CAAAF,IAAA;cACA,GACAqC,KAAA,WAAAC,KAAA;gBACAxB,OAAA,CAAAwB,KAAA,yCAAAA,KAAA;cACA;YAAA;YAAA;cAAA,OAAAT,QAAA,CAAAU,IAAA;UAAA;QAAA,GAAAb,OAAA;MAAA;IACA;IACAU,UAAA,WAAAA,WAAAI,QAAA;MAAA,IAAAC,MAAA;MACA1C,KAAA,CAAAc,GAAA,wDAAA6B,MAAA,CAAAF,QAAA,4CACAR,IAAA,WAAAC,QAAA;QACAQ,MAAA,CAAAvC,MAAA,CAAAC,EAAA,GAAA8B,QAAA,CAAAhC,IAAA,CAAAuC,QAAA,IAAArC,EAAA;QACAW,OAAA,CAAAC,GAAA;QACAD,OAAA,CAAAC,GAAA,CAAA0B,MAAA,CAAAvC,MAAA,CAAAC,EAAA;QACAsC,MAAA,CAAAE,SAAA;MACA,GACAN,KAAA,WAAAC,KAAA;QACAxB,OAAA,CAAAwB,KAAA,6BAAAA,KAAA;MACA;IACA;IACAK,SAAA,WAAAA,UAAA;MACA;MACA,KAAA/B,OAAA,CAAAgC,GAAA,WAAA1B,IAAA,CAAA2B,SAAA,MAAA3C,MAAA;MACA,KAAAc,MAAA,CAAAC,MAAA,yBAAAf,MAAA;IACA;EACA;AACA","ignoreList":[]}]}