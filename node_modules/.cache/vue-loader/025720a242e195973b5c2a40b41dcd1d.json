{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\App.vue","mtime":1716949481752},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlZ2lvbjp7CiAgICAgICAgbmFtZTpudWxsLAogICAgICAgIGlkOm51bGwsCiAgICAgICAgaXA6bnVsbCwKICAgICAgICBsYXQ6bnVsbCwKICAgICAgICBsb246bnVsbCwKICAgICAgICBKV0Q6bnVsbAogICAgICB9LAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuY2hlY2tDb29raWVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja0Nvb2tpZURhdGEoKSB7CiAgICAgIGNvbnN0IHJlZ2lvbkZyb21Db29raWUgPSB0aGlzLiRjb29raWUuZ2V0KCdyZWdpb24nKTsKICAgICAgY29uc29sZS5sb2cocmVnaW9uRnJvbUNvb2tpZSkKICAgICAgLy90aGlzLmdldExvY2F0aW9uRGF0YSgpOwogICAgICBpZiAocmVnaW9uRnJvbUNvb2tpZSkgewogICAgICAgIC8vIOS7jiBjb29raWUg5Lit6K+75Y+WIHJlZ2lvbiDkv6Hmga8KICAgICAgICAvL3RoaXMucmVnaW9uPXJlZ2lvbkZyb21Db29raWU7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRMb2NhdGlvbkRhdGEnLCBKU09OLnBhcnNlKHJlZ2lvbkZyb21Db29raWUpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgiY29va2llIOS4reayoeaciSByZWdpb24g5L+h5oGvLOWImeiwg+eUqCBnZXRMb2NhdGlvbkRhdGEg5pa55rOVIikKICAgICAgICAvLyDlpoLmnpwgY29va2llIOS4reayoeaciSByZWdpb24g5L+h5oGvLOWImeiwg+eUqCBnZXRMb2NhdGlvbkRhdGEg5pa55rOVCiAgICAgICAgdGhpcy5nZXRMb2NhdGlvbkRhdGEoKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldExvY2F0aW9uRGF0YSgpIHsKICAgICAgY29uc29sZS5sb2coIjMtYXBwLWdldExvY2F0aW9uRGF0YSIpOwogIAogICAgICBheGlvcy5nZXQoJy9hcGktcmVnaW9uJykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnJlZ2lvbiA9IHsKICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZGF0YS5yZWdpb24sCiAgICAgICAgICAgIGlwOiByZXNwb25zZS5kYXRhLmlwLAogICAgICAgICAgICBsYXQ6IHJlc3BvbnNlLmRhdGEubGF0aXR1ZGUsCiAgICAgICAgICAgIGxvbjogcmVzcG9uc2UuZGF0YS5sb25naXR1ZGUsCiAgICAgICAgICAgIEpXRDogcmVzcG9uc2UuZGF0YS5sYXRpdHVkZSArICcsJyArIHJlc3BvbnNlLmRhdGEubG9uZ2l0dWRlCiAgICAgICAgICB9OwogICAgICAgICAgY29uc29sZS5sb2coIjQtYXBwIik7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJlZ2lvbik7CiAgICAgICAgICB0aGlzLmdldEdlb0luZm8odGhpcy5yZWdpb24ubmFtZSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgSVAgYW5kIGxvY2F0aW9uIGluZm86JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldEdlb0luZm8obG9jYXRpb24pIHsKICAgICAgYXhpb3MuZ2V0KGBodHRwczovL2dlb2FwaS5xd2VhdGhlci5jb20vdjIvY2l0eS9sb29rdXA/bG9jYXRpb249JHtsb2NhdGlvbn0ma2V5PTVmMDE3YzZkN2VkYjRhN2JhOWZlNGY0OTFhMjkwMGNhYCkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnJlZ2lvbi5pZCA9IHJlc3BvbnNlLmRhdGEubG9jYXRpb25bMF0uaWQ7CiAgICAgICAgICBjb25zb2xlLmxvZygiNS1hcHAiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVnaW9uLmlkKTsKICAgICAgICAgIHRoaXMuc3RvcmVEYXRhKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ2VvIGluZm86JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIHN0b3JlRGF0YSgpIHsKICAgICAgLy8g5bCGIGlwSW5mbyDlkowgZ2VvSW5mbyDlrZjlgqjliLAgY29va2llIOWSjCBWdWV4IHN0b3JlIOS4rQogICAgICB0aGlzLiRjb29raWUuc2V0KCJyZWdpb24iLCBKU09OLnN0cmluZ2lmeSh0aGlzLnJlZ2lvbiksICc3ZCcpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldExvY2F0aW9uRGF0YScsIHRoaXMucmVnaW9uKTsKICAgIH0KICB9Cn0KCg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-05-28 23:32:07\n * @FilePath: \\screen-vue-datav\\src\\App.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-05-28 08:06:00\n * @FilePath: \\screen-vue-datav\\src\\App.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nexport default {\n  name: '',\n  data() {\n    return {\n      region:{\n        name:null,\n        id:null,\n        ip:null,\n        lat:null,\n        lon:null,\n        JWD:null\n      },\n    }\n  },\n  created() {\n    this.checkCookieData();\n  },\n  methods: {\n    checkCookieData() {\n      const regionFromCookie = this.$cookie.get('region');\n      console.log(regionFromCookie)\n      //this.getLocationData();\n      if (regionFromCookie) {\n        // 从 cookie 中读取 region 信息\n        //this.region=regionFromCookie;\n        this.$store.commit('setLocationData', JSON.parse(regionFromCookie));\n      } else {\n        alert(\"cookie 中没有 region 信息,则调用 getLocationData 方法\")\n        // 如果 cookie 中没有 region 信息,则调用 getLocationData 方法\n        this.getLocationData();\n      }\n    },\n    async getLocationData() {\n      console.log(\"3-app-getLocationData\");\n  \n      axios.get('/api-region')\n        .then(response => {\n          this.region = {\n            name: response.data.region,\n            ip: response.data.ip,\n            lat: response.data.latitude,\n            lon: response.data.longitude,\n            JWD: response.data.latitude + ',' + response.data.longitude\n          };\n          console.log(\"4-app\");\n          console.log(this.region);\n          this.getGeoInfo(this.region.name);\n        })\n        .catch(error => {\n          console.error('Error fetching IP and location info:', error);\n        });\n    },\n    getGeoInfo(location) {\n      axios.get(`https://geoapi.qweather.com/v2/city/lookup?location=${location}&key=5f017c6d7edb4a7ba9fe4f491a2900ca`)\n        .then(response => {\n          this.region.id = response.data.location[0].id;\n          console.log(\"5-app\");\n          console.log(this.region.id);\n          this.storeData();\n        })\n        .catch(error => {\n          console.error('Error fetching geo info:', error);\n        });\n    },\n    storeData() {\n      // 将 ipInfo 和 geoInfo 存储到 cookie 和 Vuex store 中\n      this.$cookie.set(\"region\", JSON.stringify(this.region), '7d');\n      this.$store.commit('setLocationData', this.region);\n    }\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n#app {\n  width: 100vw;\n  height: 100vh;\n  background-color: #020308;\n  overflow: hidden;\n}\n</style>\n"]}]}