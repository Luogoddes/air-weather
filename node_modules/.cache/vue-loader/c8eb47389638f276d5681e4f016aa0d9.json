{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\views\\bottomRight.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\views\\bottomRight.vue","mtime":1717931288159},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IEJvdHRvbVJpZ2h0Q2hhcnQgZnJvbSAiQC9jb21wb25lbnRzL2VjaGFydC9ib3R0b20vYm90dG9tUmlnaHRDaGFydCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCb3R0b21SaWdodENoYXJ0CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICByZWdpb246IHN0YXRlID0+IHN0YXRlLnJlZ2lvbiwKICAgIH0pLAogIH0sCiAgd2F0Y2g6IHsKICAgICdyZWdpb24uaWQnOiBmdW5jdGlvbiAobmV3SWQpIHsKICAgICAgaWYgKG5ld0lkKSB7CiAgICAgICAgLy9hbGVydCgi55Sf5rS75pWw5o2u5oyH5pWwIOebkeWQrOWIsOWcsOWMuuWAvOaUueWPmO+8jOW8gOWni+i9ruivouaVsOaNrjoiICsgbmV3SWQpCiAgICAgICAgdGhpcy5nZXRJbmRpY2VzSW5mbyhuZXdJZCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5yZWdpb24uaWQpIHsKICAgICAgLy9hbGVydCgi55Sf5rS75pWw5o2u5oyH5pWwIOaciSIpCiAgICAgIHRoaXMuZ2V0SW5kaWNlc0luZm8odGhpcy5yZWdpb24uaWQpOwogICAgfSAKICAgIC8vIGVsc2UgewogICAgLy8gICBhbGVydCgi55Sf5rS75pWw5o2u5oyH5pWwIOayoeaciSIpCiAgICAvLyB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmxhZzpmYWxzZSwKICAgICAgY29uZmlnOiB7CiAgICAgICAgaGVhZGVyOiBbJ+e7hOS7ticsICfnsbvlnosnLCAn6K+05piOJ10sCiAgICAgICAgZGF0YTogWwogICAgICAgICAgLy8gWyfov5DliqjmjIfmlbAnLCAiPHNwYW4gY2xhc3M9J2NvbG9yR3Jhc3MnPui+g+mAguWunDwvc3Bhbj4iLCAi5bGe5Lit562J5by65bqm57Sr5aSW57q/6L6Q5bCE5aSp5rCU77yM5aSW5Ye65pe25bu66K6u5raC5pOmU1BG6auY5LqOMTXjgIFQQSvnmoTpmLLmmZLmiqTogqTlk4HvvIzmiLTluL3lrZDjgIHlpKrpmLPplZzjgIIiXSwKICAgICAgICAgIC8vIFsn5rSX6L2m5oyH5pWwJywgIjxzcGFuIGNsYXNzPSdjb2xvclJlZCc+6L6D5LiN5a6cPC9zcGFuPiIsICLlsZ7kuK3nrYnlvLrluqbntKvlpJbnur/ovpDlsITlpKnmsJTvvIzlpJblh7rml7blu7rorq7mtoLmk6ZTUEbpq5jkuo4xNeOAgVBBK+eahOmYsuaZkuaKpOiCpOWTge+8jOaItOW4veWtkOOAgeWkqumYs+mVnOOAgiJdLAogICAgICAgIF0sCiAgICAgICAgcm93TnVtOiA1LCAvL+ihqOagvOihjOaVsAogICAgICAgIGhlYWRlckhlaWdodDogMzUsCiAgICAgICAgaGVhZGVyQkdDOiAnIzBmMTMyNScsIC8v6KGo5aS0CiAgICAgICAgb2RkUm93QkdDOiAnIzBmMTMyNScsIC8v5aWH5pWw6KGMCiAgICAgICAgZXZlblJvd0JHQzogJyMxNzFjMzMnLCAvL+WBtuaVsOihjAogICAgICAgIGluZGV4OiB0cnVlLAogICAgICAgIGNvbHVtbldpZHRoOiBbMTIsIDExMCwgODAsIDc1MF0sIC8vIOiuvue9ruWIl+WuveW6pgogICAgICAgIGFsaWduOiBbJ2xlZnQnLCAnbGVmdCcsICdjZW50ZXInLCAnbGVmdCddCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEluZGljZXNJbmZvKGxvY2F0aW9uKSB7CiAgICAgIAogICAgICAvL2NvbnN0IGxvY2F0aW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRSZWdpb25JZDsKICAgICAgLy9hbGVydCgi55Sf5rS75pWw5o2u5oyH5pWw77yaIitsb2NhdGlvbikKICAgICAgY29uc3QgY29sb3JNYXBwaW5nID0gewogICAgICAgICfov5DliqjmjIfmlbAnOiB7IDE6ICdjb2xvckdyYXNzJywgMjogJ2NvbG9yR3Jhc3MnLCAzOiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+a0l+i9puaMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvckdyYXNzJywgNDogJ2NvbG9yUmVkJyB9LAogICAgICAgICfnqb/ooaPmjIfmlbAnOiB7IDE6ICdjb2xvclJlZCcsIDI6ICdjb2xvclJlZCcsIDM6ICdjb2xvclJlZCcsIDQ6ICdjb2xvckdyYXNzJywgNTogJ2NvbG9yR3Jhc3MnLCA2OiAnY29sb3JHcmFzcycsIDc6ICdjb2xvclJlZCcgfSwKICAgICAgICAn6ZKT6bG85oyH5pWwJzogeyAxOiAnY29sb3JHcmFzcycsIDI6ICdjb2xvckdyYXNzJywgMzogJ2NvbG9yUmVkJyB9LAogICAgICAgICfntKvlpJbnur/mjIfmlbAnOiB7IDE6ICdjb2xvckdyYXNzJywgMjogJ2NvbG9yR3Jhc3MnLCAzOiAnY29sb3JHcmFzcycsIDQ6ICdjb2xvclJlZCcsIDU6ICdjb2xvclJlZCcgfSwKICAgICAgICAn5peF5ri45oyH5pWwJzogeyAxOiAnY29sb3JHcmFzcycsIDI6ICdjb2xvckdyYXNzJywgMzogJ2NvbG9yR3Jhc3MnLCA0OiAnY29sb3JSZWQnLCA1OiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+iKseeyiei/h+aVj+aMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvckdyYXNzJywgNDogJ2NvbG9yUmVkJywgNTogJ2NvbG9yUmVkJyB9LAogICAgICAgICfoiJLpgILluqbmjIfmlbAnOiB7IDE6ICdjb2xvckdyYXNzJywgMjogJ2NvbG9yR3Jhc3MnLCAzOiAnY29sb3JSZWQnLCA0OiAnY29sb3JSZWQnLCA1OiAnY29sb3JSZWQnLCA2OiAnY29sb3JSZWQnLCA3OiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+aEn+WGkuaMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvclJlZCcsIDQ6ICdjb2xvclJlZCcgfSwKICAgICAgICAn56m65rCU5rGh5p+T5omp5pWj5p2h5Lu25oyH5pWwJzogeyAxOiAnY29sb3JHcmFzcycsIDI6ICdjb2xvckdyYXNzJywgMzogJ2NvbG9yR3Jhc3MnLCA0OiAnY29sb3JSZWQnLCA1OiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+epuuiwg+W8gOWQr+aMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvckdyYXNzJywgNDogJ2NvbG9yUmVkJyB9LAogICAgICAgICflpKrpmLPplZzmjIfmlbAnOiB7IDE6ICdjb2xvckdyYXNzJywgMjogJ2NvbG9yR3Jhc3MnLCAzOiAnY29sb3JSZWQnLCA0OiAnY29sb3JSZWQnLCA1OiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+WMluWmhuaMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvclJlZCcsIDQ6ICdjb2xvclJlZCcsIDU6ICdjb2xvclJlZCcsIDY6ICdjb2xvclJlZCcsIDc6ICdjb2xvclJlZCcsIDg6ICdjb2xvckdyYXNzJyB9LAogICAgICAgICfmmb7mmZLmjIfmlbAnOiB7IDE6ICdjb2xvckdyYXNzJywgMjogJ2NvbG9yR3Jhc3MnLCAzOiAnY29sb3JHcmFzcycsIDQ6ICdjb2xvclJlZCcsIDU6ICdjb2xvclJlZCcsIDY6ICdjb2xvclJlZCcgfSwKICAgICAgICAn5Lqk6YCa5oyH5pWwJzogeyAxOiAnY29sb3JHcmFzcycsIDI6ICdjb2xvckdyYXNzJywgMzogJ2NvbG9yR3Jhc3MnLCA0OiAnY29sb3JSZWQnLCA1OiAnY29sb3JSZWQnIH0sCiAgICAgICAgJ+mYsuaZkuaMh+aVsCc6IHsgMTogJ2NvbG9yR3Jhc3MnLCAyOiAnY29sb3JHcmFzcycsIDM6ICdjb2xvckdyYXNzJywgNDogJ2NvbG9yUmVkJywgNTogJ2NvbG9yUmVkJyB9CiAgICAgIH07CgogICAgICBjb25zdCBmaWx0ZXJlZEluZGljZXMgPSBbJ+i/kOWKqOaMh+aVsCcsICfnqb/ooaPmjIfmlbAnLCAn57Sr5aSW57q/5oyH5pWwJywgJ+iIkumAguW6puaMh+aVsCcsICfmhJ/lhpLmjIfmlbAnLCAn5pm+5pmS5oyH5pWwJ107CiAgICAgIGNvbnN0IGxpdmluZ0luZGV4ID0gW107CiAgICAgIGF4aW9zLmdldChgaHR0cHM6Ly9kZXZhcGkucXdlYXRoZXIuY29tL3Y3L2luZGljZXMvMWQ/dHlwZT0wJmxvY2F0aW9uPSR7bG9jYXRpb259JmtleT0ke3RoaXMuJGFwaUtleX1gKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IGRhaWx5ID0gcmVzcG9uc2UuZGF0YS5kYWlseTsKICAgICAgICAgIGNvbnNvbGUubG9nKCI9PT09PeeUn+a0u+aMh+aVsOWMuj09PT09Iik7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhaWx5KTsKICAgICAgICAgIHRoaXMuY29uZmlnLmRhdGE9W107CiAgICAgICAgICBkYWlseS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoY29sb3JNYXBwaW5nW2l0ZW0ubmFtZV0gJiYgY29sb3JNYXBwaW5nW2l0ZW0ubmFtZV1baXRlbS5sZXZlbF0pIHsKICAgICAgICAgICAgICBjb25zdCBjb2xvckNsYXNzID0gY29sb3JNYXBwaW5nW2l0ZW0ubmFtZV1baXRlbS5sZXZlbF07CiAgICAgICAgICAgICAgdGhpcy5jb25maWcuZGF0YS5wdXNoKFtpdGVtLm5hbWUsIGA8c3BhbiBjbGFzcz0nJHtjb2xvckNsYXNzfSc+JHtpdGVtLmNhdGVnb3J5fTwvc3Bhbj5gLCBpdGVtLnRleHRdKTsKCiAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkSW5kaWNlcy5pbmNsdWRlcyhpdGVtLm5hbWUpKSB7CiAgICAgICAgICAgICAgICBsaXZpbmdJbmRleC5wdXNoKGl0ZW0ubGV2ZWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYE5vIGNvbG9yIG1hcHBpbmcgZm91bmQgZm9yICR7aXRlbS5uYW1lfSB3aXRoIGxldmVsICR7aXRlbS5sZXZlbH1gKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbmZpZy5kYXRhKQogICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTsKICAgICAgICAgIC8vIOWtmOWCqOWIsCBWdWV4CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldExpdmluZ0luZGV4JywgbGl2aW5nSW5kZXgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEluZGljZXMtcmlnaHQgaW5mbzonLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["bottomRight.vue"],"names":[],"mappings":";AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bottomRight.vue","sourceRoot":"src/views","sourcesContent":["<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-06-09 19:08:08\n * @Description: \n-->\n<template>\n  <div id=\"bottomRight\">\n    <div class=\"bg-color-black\">\n      <div class=\"d-flex pt-2 pl-2\">\n        <span>\n          <icon name=\"chart-area\" class=\"text-icon\"></icon>\n        </span>\n        <div class=\"d-flex\">\n          <span class=\"text mx-2\">天气生活指数预报-未来两小时降雨量</span>\n\n        </div>\n      </div>\n      <div class=\"d-flex jc-center body-box\">\n        <dv-scroll-board v-if=\"flag\" class=\"dv-scr-board\" :config=\"config\" />\n      </div>\n      <BottomRightChart />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport axios from 'axios'\nimport BottomRightChart from \"@/components/echart/bottom/bottomRightChart\";\nexport default {\n  components: {\n    BottomRightChart\n  },\n  computed: {\n    ...mapState({\n      region: state => state.region,\n    }),\n  },\n  watch: {\n    'region.id': function (newId) {\n      if (newId) {\n        //alert(\"生活数据指数 监听到地区值改变，开始轮询数据:\" + newId)\n        this.getIndicesInfo(newId);\n      }\n    }\n  },\n  mounted() {\n    if (this.region.id) {\n      //alert(\"生活数据指数 有\")\n      this.getIndicesInfo(this.region.id);\n    } \n    // else {\n    //   alert(\"生活数据指数 没有\")\n    // }\n  },\n  data() {\n    return {\n      flag:false,\n      config: {\n        header: ['组件', '类型', '说明'],\n        data: [\n          // ['运动指数', \"<span class='colorGrass'>较适宜</span>\", \"属中等强度紫外线辐射天气，外出时建议涂擦SPF高于15、PA+的防晒护肤品，戴帽子、太阳镜。\"],\n          // ['洗车指数', \"<span class='colorRed'>较不宜</span>\", \"属中等强度紫外线辐射天气，外出时建议涂擦SPF高于15、PA+的防晒护肤品，戴帽子、太阳镜。\"],\n        ],\n        rowNum: 5, //表格行数\n        headerHeight: 35,\n        headerBGC: '#0f1325', //表头\n        oddRowBGC: '#0f1325', //奇数行\n        evenRowBGC: '#171c33', //偶数行\n        index: true,\n        columnWidth: [12, 110, 80, 750], // 设置列宽度\n        align: ['left', 'left', 'center', 'left']\n      }\n    }\n  },\n  methods: {\n    getIndicesInfo(location) {\n      \n      //const location = this.$store.getters.getRegionId;\n      //alert(\"生活数据指数：\"+location)\n      const colorMapping = {\n        '运动指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed' },\n        '洗车指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed' },\n        '穿衣指数': { 1: 'colorRed', 2: 'colorRed', 3: 'colorRed', 4: 'colorGrass', 5: 'colorGrass', 6: 'colorGrass', 7: 'colorRed' },\n        '钓鱼指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed' },\n        '紫外线指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '旅游指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '花粉过敏指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '舒适度指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed', 7: 'colorRed' },\n        '感冒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed' },\n        '空气污染扩散条件指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '空调开启指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed' },\n        '太阳镜指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed' },\n        '化妆指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed', 7: 'colorRed', 8: 'colorGrass' },\n        '晾晒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed' },\n        '交通指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '防晒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' }\n      };\n\n      const filteredIndices = ['运动指数', '穿衣指数', '紫外线指数', '舒适度指数', '感冒指数', '晾晒指数'];\n      const livingIndex = [];\n      axios.get(`https://devapi.qweather.com/v7/indices/1d?type=0&location=${location}&key=${this.$apiKey}`)\n        .then(response => {\n          const daily = response.data.daily;\n          console.log(\"=====生活指数区=====\");\n          //console.log(daily);\n          this.config.data=[];\n          daily.forEach(item => {\n            if (colorMapping[item.name] && colorMapping[item.name][item.level]) {\n              const colorClass = colorMapping[item.name][item.level];\n              this.config.data.push([item.name, `<span class='${colorClass}'>${item.category}</span>`, item.text]);\n\n              if (filteredIndices.includes(item.name)) {\n                livingIndex.push(item.level);\n              }\n            } else {\n              console.warn(`No color mapping found for ${item.name} with level ${item.level}`);\n            }\n          });\n\n          //console.log(this.config.data)\n          this.flag = true;\n          // 存储到 Vuex\n          this.$store.commit('setLivingIndex', livingIndex);\n        })\n        .catch(error => {\n          console.error('Error fetching Indices-right info:', error);\n        });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" class>\n$box-height: 520px;\n$box-width: 100%;\n\n#bottomRight {\n  padding: 14px 16px;\n  height: $box-height;\n  width: $box-width;\n  border-radius: 5px;\n\n  .bg-color-black {\n    height: $box-height - 30px;\n    border-radius: 10px;\n  }\n\n  .text {\n    color: #c3cbde;\n  }\n\n  .chart-box {\n    margin-top: 16px;\n    width: 170px;\n    height: 170px;\n\n    .active-ring-name {\n      padding-top: 10px;\n    }\n  }\n\n  .body-box {\n    border-radius: 5px;\n    overflow: hidden;\n\n    .dv-scr-board {\n      height: 210px;\n    }\n  }\n}\n</style>"]}]}