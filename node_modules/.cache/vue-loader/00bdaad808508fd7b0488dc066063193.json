{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\views\\center.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\views\\center.vue","mtime":1717935576424},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMaXZpbmdJbmRleCBmcm9tICdAL2NvbXBvbmVudHMvZWNoYXJ0L2NlbnRlci9saXZpbmctaW5kZXgnCmltcG9ydCBDZW50ZXJDaGFydCBmcm9tICdAL2NvbXBvbmVudHMvZWNoYXJ0L2NlbnRlci9jZW50ZXJDaGFydFJhdGUnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENlbnRlckNoYXJ0LCBMaXZpbmdJbmRleAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgcmVnaW9uOiBzdGF0ZSA9PiBzdGF0ZS5yZWdpb24sCiAgICB9KSwKICB9LAogIHdhdGNoOiB7CiAgICAncmVnaW9uLmlkJzogZnVuY3Rpb24gKG5ld0lkKSB7CiAgICAgIGlmIChuZXdJZCkgewogICAgICAgIC8vYWxlcnQoImNlbnRlciDnm5HlkKzliLDlnLDljLrlgLzmlLnlj5jvvIzlvIDlp4vova7or6LmlbDmja46IiArIG5ld0lkKQogICAgICAgIHRoaXMuZHJhd1RpbWluZ0ZuKG5ld0lkKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLnJlZ2lvbi5pZCkgewogICAgICAvL2FsZXJ0KCJjZW50ZXIg5pyJIikKICAgICAgdGhpcy5kcmF3VGltaW5nRm4odGhpcy5yZWdpb24uaWQpOwogICAgfSAKICAgIC8vIGVsc2UgewogICAgLy8gICBhbGVydCgiY2VudGVyIOayoeaciSIpCiAgICAvLyB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGVJdGVtOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmnIDmlrDniannkIbmm7TmlrDml7bpl7QnLAogICAgICAgICAgbnVtYmVyOiAnNS0yOCAxOTo0OCcKICAgICAgICB9LAoKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S7iuaXpeWkqeawlOeKtuWGtScsCiAgICAgICAgICBudW1iZXI6ICflpJrkupEnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S7iuaXpemjjuWQkS0t562J57qnJywKICAgICAgICAgIG51bWJlcjogJ+ilv+WMl+mjjiAx57qnJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfku4rml6XlpKfmsJTljovlvLonLAogICAgICAgICAgbnVtYmVyOiAnODMlJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfku4rml6Xog73op4HluqYnLAogICAgICAgICAgbnVtYmVyOiAnOGttJwogICAgICAgIH0sIHsKICAgICAgICAgIHRpdGxlOiAn6aOO57qn6ZmG5LiK5oOF5Ya1JywKICAgICAgICAgIG51bWJlcjogJ+mdmSzng5/nm7TkuIonCiAgICAgICAgfSwKICAgICAgXSwKCiAgICAgIHdhdGVyOiB7CiAgICAgICAgZGF0YTogWzAsIDBdLAogICAgICAgIHNoYXBlOiAncm91bmRSZWN0JywKICAgICAgICBmb3JtYXR0ZXI6ICfpmY3pm6jph497dmFsdWV9bW0nLAogICAgICAgIHdhdmVOdW06IDMsCiAgICAgICAgZmxhZzogZmFsc2UsCiAgICAgIH0sCiAgICAgIHdlYXRoZXI6IHsKICAgICAgICB0ZW1wOiAwLCAgIC8v5rip5bqmCiAgICAgICAgZmVlbHNMaWtlOiAwLCAgLy/kvZPmhJ/muKnluqYKICAgICAgICB3aW5kU3BlZWQ6IDAsICAvL+mjjumAnwogICAgICAgIGh1bWlkaXR5OiAwLCAgIC8v5rm/5bqmCiAgICAgICAgdmlzOiAnJywKICAgICAgICBzdW5yaXNlOiAnJywKICAgICAgICBzdW5zZXQ6ICcnLAogICAgICAgIGljb246ICcnLAogICAgICB9LAogICAgICAvLyDpgJrov4fnjoflkozovr7moIfnjofnmoTnu4Tku7blpI3nlKjmlbDmja4KICAgICAgcmF0ZTogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAnY2VudGVyUmF0ZTEnLAogICAgICAgICAgdGlwczogNjAsCiAgICAgICAgICBjb2xvckRhdGE6IHsKICAgICAgICAgICAgdGV4dFN0eWxlOiAnIzNmYzBmYicsCiAgICAgICAgICAgIHNlcmllczogewogICAgICAgICAgICAgIGNvbG9yOiBbJyMwMGJjZDQ0YScsICd0cmFuc3BhcmVudCddLAogICAgICAgICAgICAgIGRhdGFDb2xvcjogewogICAgICAgICAgICAgICAgbm9ybWFsOiAnIzAzYTlmNCcsCiAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJyM5N2UyZjUnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogJ2NlbnRlclJhdGUyJywKICAgICAgICAgIHRpcHM6IDQwLAogICAgICAgICAgY29sb3JEYXRhOiB7CiAgICAgICAgICAgIHRleHRTdHlsZTogJyM2N2UwZTMnLAogICAgICAgICAgICBzZXJpZXM6IHsKICAgICAgICAgICAgICBjb2xvcjogWycjZmFmM2EzNzgnLCAndHJhbnNwYXJlbnQnXSwKICAgICAgICAgICAgICBkYXRhQ29sb3I6IHsKICAgICAgICAgICAgICAgIG5vcm1hbDogJyNmZjk4MDAnLAogICAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICcjZmNlYmFkJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZHJhd1RpbWluZ0ZuKGxvY2F0aW9uKSB7CiAgICAgIHRoaXMuZ2V0V2VhdGhlckluZm8obG9jYXRpb24pOwogICAgICB0aGlzLmRyYXdUaW1pbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRXZWF0aGVySW5mbyhsb2NhdGlvbik7CiAgICAgIH0sIDYwMDAwMCk7ICAgLy82MDAwMDDvvIgxMOWIhumSn+eahOavq+enkuaVsO+8iQogICAgfSwKICAgIGdldFdlYXRoZXJJbmZvKGxvY2F0aW9uKSB7CiAgICAgIGNvbnN0IHdpbmRDb25kaXRpb25zID0gewogICAgICAgIDA6ICLpnZks54Of55u05LiKIiwKICAgICAgICAxOiAi54Of56S66aOO5ZCRIiwKICAgICAgICAyOiAi5oSf6KeJ5pyJ6aOOIiwKICAgICAgICAzOiAi5peM5peX5bGV5byAIiwKICAgICAgICA0OiAi5ZC56LW35bCY5ZyfIiwKICAgICAgICA1OiAi5bCP5qCR5pGH5pGGIiwKICAgICAgICA2OiAi55S157q/5pyJ5aOwIiwKICAgICAgICA3OiAi5q2l6KGM5Zuw6Zq+IiwKICAgICAgICA4OiAi5oqY5q+B5qCR5p6dIiwKICAgICAgICA5OiAi5bCP5o2f5oi/5bGLIiwKICAgICAgICAxMDogIuaLlOi1t+agkeacqCIsCiAgICAgICAgMTE6ICLmjZ/mr4Hph43lpKciLAogICAgICAgIDEyOiAi5pGn5q+B5p6B5aSnIgogICAgICB9OwogICAgICAvL2NvbnN0IGxvY2F0aW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRSZWdpb25JZDsKICAgICAgLy9hbGVydCgiY2VudGVy55qEIiArIGxvY2F0aW9uKQogICAgICBheGlvcy5nZXQoYGh0dHBzOi8vZGV2YXBpLnF3ZWF0aGVyLmNvbS92Ny93ZWF0aGVyL25vdz9sb2NhdGlvbj0ke2xvY2F0aW9ufSZrZXk9JHt0aGlzLiRhcGlLZXl9YCkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgY29uc29sZS5sb2coIj09PT09Y2VudGVyPT09PT0iKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEubm93KTsKCiAgICAgICAgICB0aGlzLndlYXRoZXIgPSByZXNwb25zZS5kYXRhLm5vdzsKICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhLm5vdzsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TG9jYXRpb25XZWF0aGVyJywgdGhpcy53ZWF0aGVyKTsKICAgICAgICAgIHRoaXMucmF0ZVswXS50aXBzID0gTnVtYmVyKGRhdGEuaHVtaWRpdHkpOwogICAgICAgICAgdGhpcy5yYXRlWzFdLnRpcHMgPSBOdW1iZXIoZGF0YS5jbG91ZCk7CiAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEucHJlY2lwKSA8PSAxNSkgewogICAgICAgICAgICB0aGlzLndhdGVyLmRhdGEgPSBbMCwgTnVtYmVyKGRhdGEucHJlY2lwKV07CiAgICAgICAgICAgIHRoaXMud2F0ZXIuZmxhZyA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLndhdGVyLmRhdGEgPSBbTnVtYmVyKGRhdGEucHJlY2lwKSAtIDEwLCBOdW1iZXIoZGF0YS5wcmVjaXApXTsKICAgICAgICAgICAgdGhpcy53YXRlci5mbGFnID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOabtOaWsCB0aXRsZUl0ZW0g5pWw57uE5Lit55qE5a2X5q61CgogICAgICAgICAgdGhpcy50aXRsZUl0ZW1bMF0ubnVtYmVyID0gZGF0YS5vYnNUaW1lLnJlcGxhY2UoJ1QnLCAnICcpLnN1YnN0cmluZyg1LCAxNik7IC8vIOaIquWPliAiMjAyNC0wNi0wOFQxODozMiswODowMCIg5Lit55qE5pel5pyf5ZKM5pe26Ze06YOo5YiGCiAgICAgICAgICB0aGlzLnRpdGxlSXRlbVsxXS5udW1iZXIgPSBkYXRhLnRleHQ7CiAgICAgICAgICB0aGlzLnRpdGxlSXRlbVsyXS5udW1iZXIgPSBgJHtkYXRhLndpbmREaXJ9ICR7ZGF0YS53aW5kU2NhbGV957qnYDsKICAgICAgICAgIHRoaXMudGl0bGVJdGVtWzNdLm51bWJlciA9IGAke2RhdGEucHJlc3N1cmV9IFBhYDsKICAgICAgICAgIHRoaXMudGl0bGVJdGVtWzRdLm51bWJlciA9IGAke2RhdGEudmlzfWttYDsKICAgICAgICAgIHRoaXMudGl0bGVJdGVtWzVdLm51bWJlciA9IHdpbmRDb25kaXRpb25zW2RhdGEud2luZFNjYWxlXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB3ZWF0aGVyIGluZm86JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMuZHJhd1RpbWluZyk7CiAgfSwKCn0K"},{"version":3,"sources":["center.vue"],"names":[],"mappings":";AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"center.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"center\">\n    <div class=\"up\">\n      <div class=\"bg-color-black item\" v-for=\"item in titleItem\" :key=\"item.title\">\n        <p class=\"ml-3 colorBlue fw-b\">{{ item.title }}</p>\n        <div class=\"ml-1 mt-2 pl-3\" style=\"font-size: 26px;color: #67E0E3; font-weight: bold;\">\n          {{ item.number }}\n          <!-- <dv-digital-flop\n            class=\"dv-dig-flop ml-1 mt-2 pl-3\"\n            :config=\"item.number\"\n          /> -->\n        </div>\n      </div>\n    </div>\n\n    <div class=\"down\">\n      <div class=\"percent\">\n        <div class=\"item bg-color-black\">\n          <span>今日相对湿度</span>\n          <CenterChart :id=\"rate[0].id\" :tips=\"rate[0].tips\" :colorObj=\"rate[0].colorData\" />\n        </div>\n        <div class=\"item bg-color-black\">\n          <span>今日相对云量</span>\n          <CenterChart :id=\"rate[1].id\" :tips=\"rate[1].tips\" :colorObj=\"rate[1].colorData\" />\n        </div>\n        <div class=\"water\" v-if=\"water.flag\">\n          <dv-water-level-pond class=\"dv-wa-le-po\" :config=\"water\" />\n        </div>\n      </div>\n      <div class=\"ranking bg-color-black\">\n        <LivingIndex style=\"margin-top: -20px;margin-left: 22px;\" />\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport LivingIndex from '@/components/echart/center/living-index'\nimport CenterChart from '@/components/echart/center/centerChartRate'\nimport axios from 'axios'\nimport { mapState } from 'vuex';\nexport default {\n  components: {\n    CenterChart, LivingIndex\n  },\n  computed: {\n    ...mapState({\n      region: state => state.region,\n    }),\n  },\n  watch: {\n    'region.id': function (newId) {\n      if (newId) {\n        //alert(\"center 监听到地区值改变，开始轮询数据:\" + newId)\n        this.drawTimingFn(newId);\n      }\n    }\n  },\n  mounted() {\n    if (this.region.id) {\n      //alert(\"center 有\")\n      this.drawTimingFn(this.region.id);\n    } \n    // else {\n    //   alert(\"center 没有\")\n    // }\n  },\n  data() {\n    return {\n      titleItem: [\n        {\n          title: '最新物理更新时间',\n          number: '5-28 19:48'\n        },\n\n        {\n          title: '今日天气状况',\n          number: '多云'\n        },\n        {\n          title: '今日风向--等级',\n          number: '西北风 1级'\n        },\n        {\n          title: '今日大气压强',\n          number: '83%'\n        },\n        {\n          title: '今日能见度',\n          number: '8km'\n        }, {\n          title: '风级陆上情况',\n          number: '静,烟直上'\n        },\n      ],\n\n      water: {\n        data: [0, 0],\n        shape: 'roundRect',\n        formatter: '降雨量{value}mm',\n        waveNum: 3,\n        flag: false,\n      },\n      weather: {\n        temp: 0,   //温度\n        feelsLike: 0,  //体感温度\n        windSpeed: 0,  //风速\n        humidity: 0,   //湿度\n        vis: '',\n        sunrise: '',\n        sunset: '',\n        icon: '',\n      },\n      // 通过率和达标率的组件复用数据\n      rate: [\n        {\n          id: 'centerRate1',\n          tips: 60,\n          colorData: {\n            textStyle: '#3fc0fb',\n            series: {\n              color: ['#00bcd44a', 'transparent'],\n              dataColor: {\n                normal: '#03a9f4',\n                shadowColor: '#97e2f5'\n              }\n            }\n          }\n        },\n        {\n          id: 'centerRate2',\n          tips: 40,\n          colorData: {\n            textStyle: '#67e0e3',\n            series: {\n              color: ['#faf3a378', 'transparent'],\n              dataColor: {\n                normal: '#ff9800',\n                shadowColor: '#fcebad'\n              }\n            }\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    drawTimingFn(location) {\n      this.getWeatherInfo(location);\n      this.drawTiming = setInterval(() => {\n        this.getWeatherInfo(location);\n      }, 600000);   //600000（10分钟的毫秒数）\n    },\n    getWeatherInfo(location) {\n      const windConditions = {\n        0: \"静,烟直上\",\n        1: \"烟示风向\",\n        2: \"感觉有风\",\n        3: \"旌旗展开\",\n        4: \"吹起尘土\",\n        5: \"小树摇摆\",\n        6: \"电线有声\",\n        7: \"步行困难\",\n        8: \"折毁树枝\",\n        9: \"小损房屋\",\n        10: \"拔起树木\",\n        11: \"损毁重大\",\n        12: \"摧毁极大\"\n      };\n      //const location = this.$store.getters.getRegionId;\n      //alert(\"center的\" + location)\n      axios.get(`https://devapi.qweather.com/v7/weather/now?location=${location}&key=${this.$apiKey}`)\n        .then(response => {\n\n          console.log(\"=====center=====\");\n          console.log(response.data.now);\n\n          this.weather = response.data.now;\n          const data = response.data.now;\n          this.$store.commit('setLocationWeather', this.weather);\n          this.rate[0].tips = Number(data.humidity);\n          this.rate[1].tips = Number(data.cloud);\n          if (Number(data.precip) <= 15) {\n            this.water.data = [0, Number(data.precip)];\n            this.water.flag = true;\n          } else {\n            this.water.data = [Number(data.precip) - 10, Number(data.precip)];\n            this.water.flag = true;\n          }\n          // 更新 titleItem 数组中的字段\n\n          this.titleItem[0].number = data.obsTime.replace('T', ' ').substring(5, 16); // 截取 \"2024-06-08T18:32+08:00\" 中的日期和时间部分\n          this.titleItem[1].number = data.text;\n          this.titleItem[2].number = `${data.windDir} ${data.windScale}级`;\n          this.titleItem[3].number = `${data.pressure} Pa`;\n          this.titleItem[4].number = `${data.vis}km`;\n          this.titleItem[5].number = windConditions[data.windScale];\n        })\n        .catch(error => {\n          console.error('Error fetching weather info:', error);\n        });\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.drawTiming);\n  },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#center {\n  display: flex;\n  flex-direction: column;\n\n  .up {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-around;\n\n    .item {\n      border-radius: 6px;\n      padding-top: 8px;\n      margin-top: 8px;\n      width: 32%;\n      height: 70px;\n\n      .dv-dig-flop {\n        width: 150px;\n        height: 30px;\n      }\n    }\n  }\n\n  .down {\n    padding: 6px 4px;\n    padding-bottom: 0;\n    width: 100%;\n    display: flex;\n    height: 255px;\n    justify-content: space-between;\n\n    .bg-color-black {\n      border-radius: 5px;\n    }\n\n    .ranking {\n      padding: 7px;\n      width: 58%;\n\n      .dv-scr-rank-board {\n        height: 225px;\n      }\n    }\n\n    .percent {\n      width: 41%;\n      display: flex;\n      flex-wrap: wrap;\n\n      .item {\n        width: 50%;\n        height: 120px;\n\n        span {\n          margin-top: 8px;\n          font-size: 14px;\n          display: flex;\n          justify-content: center;\n        }\n      }\n\n      .water {\n        width: 100%;\n\n        .dv-wa-le-po {\n          height: 120px;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}