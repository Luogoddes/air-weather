{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\common\\echart\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\common\\echart\\index.vue","mtime":1718202851415},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZWNoYXJ0JywKICBwcm9wczogewogICAgY2xhc3NOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NoYXJ0JwogICAgfSwKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NoYXJ0JwogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJzEwMCUnCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJzIuNXJlbScKICAgIH0sCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCk9Pih7fSkKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnQ6IG51bGwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3RoZW1lJ10pCiAgfSwKICB3YXRjaDogewogICAgb3B0aW9uczogewogICAgICBoYW5kbGVyIChvcHRpb25zKSB7CiAgICAgICAgLy8g6K6+572udHJ1Zea4heepumVjaGFydOe8k+WtmAogICAgICAgIHRoaXMuY2hhcnQuc2V0T3B0aW9uKG9wdGlvbnMsIHRydWUpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgdGhlbWU6IHsKICAgICAgaGFuZGxlciAobmV3VGhlbWUpIHsKICAgICAgICB0aGlzLmluaXRDaGFydChuZXdUaGVtZSk7IC8vIOW9k+S4u+mimOWPmOWMluaXtumHjeaWsOWIneWni+WMluWbvuihqAogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuaW5pdENoYXJ0KHRoaXMudGhlbWUpOwogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7CiAgICBpZiAodGhpcy5jaGFydCkgewogICAgICB0aGlzLmNoYXJ0LmRpc3Bvc2UoKTsKICAgIH0KICAgIHRoaXMuY2hhcnQgPSBudWxsOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdENoYXJ0ICh0aGVtZSkgewogICAgICBpZiAodGhpcy5jaGFydCkgewogICAgICAgIHRoaXMuY2hhcnQuZGlzcG9zZSgpOwogICAgICB9CgogICAgICAvLyDliqjmgIHlvJXlhaXkuLvpopgKICAgICAgbGV0IHRkVGhlbWU7CiAgICAgIHN3aXRjaCAodGhlbWUpIHsKICAgICAgICBjYXNlICdzaGluZSc6CiAgICAgICAgICB0ZFRoZW1lID0gYXdhaXQgaW1wb3J0KCcuL3NoaW5lLmpzb24nKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ21hY2Fyb25zJzoKICAgICAgICAgIHRkVGhlbWUgPSBhd2FpdCBpbXBvcnQoJy4vbWFjYXJvbnMuanNvbicpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaW5mb2dyYXBoaWMnOgogICAgICAgICAgdGRUaGVtZSA9IGF3YWl0IGltcG9ydCgnLi9pbmZvZ3JhcGhpYy5qc29uJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyb21hJzoKICAgICAgICAgIHRkVGhlbWUgPSBhd2FpdCBpbXBvcnQoJy4vcm9tYS5qc29uJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd3b25kZXJsYW5kJzoKICAgICAgICAgIHRkVGhlbWUgPSBhd2FpdCBpbXBvcnQoJy4vd29uZGVybGFuZC5qc29uJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd3YWxkZW4nOgogICAgICAgICAgdGRUaGVtZSA9IGF3YWl0IGltcG9ydCgnLi93YWxkZW4uanNvbicpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZXNzb3MnOgogICAgICAgICAgdGRUaGVtZSA9IGF3YWl0IGltcG9ydCgnLi9lc3Nvcy5qc29uJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGRUaGVtZSA9IGF3YWl0IGltcG9ydCgnLi90aGVtZS5qc29uJyk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVjaGFydHMucmVnaXN0ZXJUaGVtZSgndGRUaGVtZScsIHRkVGhlbWUuZGVmYXVsdCk7CiAgICAgIHRoaXMuY2hhcnQgPSB0aGlzLiRlY2hhcnRzLmluaXQodGhpcy4kZWwsICJ0ZFRoZW1lIik7CiAgICAgIHRoaXMuY2hhcnQuc2V0T3B0aW9uKHRoaXMub3B0aW9ucywgdHJ1ZSk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/common/echart","sourcesContent":["<!-- <template>\n  <div :id=\"id\" :class=\"className\" :style=\"{ height: height, width: width }\" />\n</template>\n\n<script>\n//import tdTheme from './theme.json' // 引入默认主题\n//import tdTheme from './shine.json'\n//import tdTheme from './macarons.json'\n import tdTheme from './infographic.json'\n// import tdTheme from './roma.json'\n\n//import tdTheme from './wonderland.json'\n\n//import tdTheme from './walden.json'\n//import tdTheme from './essos.json'\n\n\n\n\nexport default {\n  name: 'echart',\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    id: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '2.5rem'\n    },\n    options: {\n      type: Object,\n      default: ()=>({})\n    }\n  },\n  data () {\n    return {\n      chart: null\n    }\n  },\n  watch: {\n    options: {\n      handler (options) {\n        // 设置true清空echart缓存\n        this.chart.setOption(options, true)\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.$echarts.registerTheme('tdTheme', tdTheme); // 覆盖默认主题\n    this.initChart();\n  },\n  beforeDestroy () {\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    initChart () {\n      // 初始化echart\n      this.chart = this.$echarts.init(this.$el,\"tdTheme\")\n      this.chart.setOption(this.options, true)\n    }\n  }\n}\n</script>\n\n<style>\n</style> -->\n<template>\n  <div :id=\"id\" :class=\"className\" :style=\"{ height: height, width: width }\" />\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nexport default {\n  name: 'echart',\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    id: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '2.5rem'\n    },\n    options: {\n      type: Object,\n      default: ()=>({})\n    }\n  },\n  data () {\n    return {\n      chart: null\n    }\n  },\n  computed: {\n    ...mapState(['theme'])\n  },\n  watch: {\n    options: {\n      handler (options) {\n        // 设置true清空echart缓存\n        this.chart.setOption(options, true);\n      },\n      deep: true\n    },\n    theme: {\n      handler (newTheme) {\n        this.initChart(newTheme); // 当主题变化时重新初始化图表\n      }\n    }\n  },\n  mounted () {\n    this.initChart(this.theme);\n  },\n  beforeDestroy () {\n    if (this.chart) {\n      this.chart.dispose();\n    }\n    this.chart = null;\n  },\n  methods: {\n    async initChart (theme) {\n      if (this.chart) {\n        this.chart.dispose();\n      }\n\n      // 动态引入主题\n      let tdTheme;\n      switch (theme) {\n        case 'shine':\n          tdTheme = await import('./shine.json');\n          break;\n        case 'macarons':\n          tdTheme = await import('./macarons.json');\n          break;\n        case 'infographic':\n          tdTheme = await import('./infographic.json');\n          break;\n        case 'roma':\n          tdTheme = await import('./roma.json');\n          break;\n        case 'wonderland':\n          tdTheme = await import('./wonderland.json');\n          break;\n        case 'walden':\n          tdTheme = await import('./walden.json');\n          break;\n        case 'essos':\n          tdTheme = await import('./essos.json');\n          break;\n        default:\n          tdTheme = await import('./theme.json');\n      }\n\n      this.$echarts.registerTheme('tdTheme', tdTheme.default);\n      this.chart = this.$echarts.init(this.$el, \"tdTheme\");\n      this.chart.setOption(this.options, true);\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}