{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\components\\echart\\bottom\\bottomRightChart\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\components\\echart\\bottom\\bottomRightChart\\index.vue","mtime":1717938579064},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\babel-loader\\lib\\index.js","mtime":1716778784730},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IENoYXJ0IGZyb20gJy4vY2hhcnQudnVlJwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyYXdUaW1pbmc6IG51bGwsCiAgICAgIGNkYXRhOiB7CiAgICAgICAgc3VtbWFyeTogIuamguimgSIsCiAgICAgICAgdGltZTogW10sCiAgICAgICAgcmFpbjogW10sCiAgICAgICAgc25vdzogW10sCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENoYXJ0LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgcmVnaW9uOiBzdGF0ZSA9PiBzdGF0ZS5yZWdpb24sCiAgICB9KSwKICAgIC8vIGRhdGFMb2FkZWQoKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLmRhdGExICYmIHRoaXMuZGF0YTIgJiYgdGhpcy5kYXRhMyAmJiB0aGlzLmRhdGE0ICYmIHRoaXMuZGF0YTUgJiYgdGhpcy5kYXRhNiAmJiB0aGlzLmFkZGl0aW9uYWxEYXRhOwogICAgLy8gfQogIH0sCiAgd2F0Y2g6IHsKICAgICdyZWdpb24uSldEJzogZnVuY3Rpb24gKG5ld0lkKSB7CiAgICAgIGlmIChuZXdJZCkgewogICAgICAgIC8vYWxlcnQoIuebkeWQrOWIsOWcsOWMuuWAvOaUueWPmO+8jOW8gOWni+i9ruivouaVsOaNriIpCiAgICAgICAgdGhpcy5kcmF3VGltaW5nRm4obmV3SWQpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMucmVnaW9uLkpXRCkgewogICAgICAvL2FsZXJ0KCJib3R0b21SaWdodENoYXJ05pyJIikKICAgICAgdGhpcy5kcmF3VGltaW5nRm4odGhpcy5yZWdpb24uSldEKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMuZHJhd1RpbWluZyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkcmF3VGltaW5nRm4obG9jYXRpb24pIHsKICAgICAgdGhpcy5nZXRSYWluSW5mbyhsb2NhdGlvbik7CiAgICAgIHRoaXMuZHJhd1RpbWluZyA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLmdldFJhaW5JbmZvKGxvY2F0aW9uKTsKICAgICAgICAvL3RoaXMuc2V0RGF0YSgpOwogICAgICB9LCA2MDAwMDApOyAgIC8vNjAwMDAw77yIMTDliIbpkp/nmoTmr6vnp5LmlbDvvIkKICAgIH0sCiAgICBzZXREYXRhKCkgewogICAgICAvLyDmuIXnqbrova7or6LmlbDmja4KICAgICAgLy8gdGhpcy5jZGF0YS50aW1lID0gWycwODowMCcsICcwODoxMCcsICcwODoyMCcsICcwODozMCcsICcwODo0MCcsICcwODo1MCcsICcwOTowMCcsICcwOToxMCcsICcwOToyMCcsICcwOTozMCcsICcwOTo0MCcsICcwOTo1MCddOwogICAgICAvLyB0aGlzLmNkYXRhLnJhaW4gPSBbMi4wLCA0LjksIDcuMCwgMy4yLCA1LjYsIDYuNywgNS42LCA2LjIsIDMuNiwgMi4wLCA2LjQsIDMuM107CiAgICAgIC8vIHRoaXMuY2RhdGEuc25vdyA9IFsyLjYsIDUuOSwgOS4wLCA2LjQsIDguNywgNi43LCA1LjYsIDguMiwgOC43LCA4LjgsIDYuMCwgMi4zXTsKICAgICAgLy8g5riF56m66L2u6K+i5pWw5o2uCiAgICAgIHRoaXMuY2RhdGEudGltZSA9IFtdOwogICAgICB0aGlzLmNkYXRhLnJhaW4gPSBbXTsKICAgICAgdGhpcy5jZGF0YS5zbm93ID0gW107CiAgICAgIGxldCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgIC8vIOeUn+aIkOmaj+acuuaVsOaNrgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEyOyBpKyspIHsKICAgICAgICAvLyDlop7liqAxMOWIhumSnwogICAgICAgIGN1cnJlbnRUaW1lLnNldE1pbnV0ZXMoY3VycmVudFRpbWUuZ2V0TWludXRlcygpICsgMTApOwoKICAgICAgICAvLyDojrflj5blop7liqDlkI7nmoTml7bpl7QKICAgICAgICBsZXQgaG91ciA9IGN1cnJlbnRUaW1lLmdldEhvdXJzKCk7CiAgICAgICAgbGV0IG1pbnV0ZSA9IGN1cnJlbnRUaW1lLmdldE1pbnV0ZXMoKTsKICAgICAgICBsZXQgdGltZSA9IGAke2hvdXJ9OiR7bWludXRlIDwgMTAgPyAnMCcgKyBtaW51dGUgOiBtaW51dGV9YDsKICAgICAgICB0aGlzLmNkYXRhLnRpbWUucHVzaCh0aW1lKTsKCiAgICAgICAgLy8g55Sf5oiQ6ZmN6Zuo6YeP5pWw5o2uCiAgICAgICAgbGV0IHJhaW4gPSAoTWF0aC5yYW5kb20oKSAqIDE1KS50b0ZpeGVkKDIpOwogICAgICAgIHRoaXMuY2RhdGEucmFpbi5wdXNoKHJhaW4pOwoKICAgICAgICAvLyDnlJ/miJDpmY3pm6rph4/mlbDmja4KICAgICAgICBsZXQgc25vdyA9IChNYXRoLnJhbmRvbSgpICogMTUpLnRvRml4ZWQoMik7CiAgICAgICAgdGhpcy5jZGF0YS5zbm93LnB1c2goc25vdyk7CiAgICAgIH0KCiAgICB9LAogICAgZ2V0UmFpbkluZm8obG9jYXRpb24pIHsKICAgICAgLy9hbGVydCgi6ZmN6Zuo6YeP77yaIiArIGxvY2F0aW9uKQogICAgICBheGlvcy5nZXQoYGh0dHBzOi8vZGV2YXBpLnF3ZWF0aGVyLmNvbS92Ny9taW51dGVseS81bT9sb2NhdGlvbj0ke2xvY2F0aW9ufSZrZXk9JHt0aGlzLiRhcGlLZXl9YCkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKCI9PT09PT096ZmN6Zuo6YePPT09PT09Iik7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgdGhpcy5jZGF0YS5zdW1tYXJ5ID0gZGF0YS5zdW1tYXJ5OwogICAgICAgICAgLy8g6YGN5Y6G5pWw5o2u5bm26L+b6KGM5YiG57G7CiAgICAgICAgICBkYXRhLm1pbnV0ZWx5LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBpdGVtLmZ4VGltZS5zdWJzdHJpbmcoMTEsIDE2KTsgLy8g5o+Q5Y+W5pe26Ze055qE5bCP5pe25ZKM5YiG6ZKf6YOo5YiGCiAgICAgICAgICAgIGNvbnN0IHByZWNpcCA9IHBhcnNlRmxvYXQoaXRlbS5wcmVjaXApOyAvLyDovazmjaLpmY3msLTmlbDmja7kuLrmta7ngrnmlbAKCiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdyYWluJykgewogICAgICAgICAgICAgIGlmICh0aGlzLmNkYXRhLnJhaW4ubGVuZ3RoID09PSAwIHx8IHRoaXMuY2RhdGEucmFpblt0aGlzLmNkYXRhLnJhaW4ubGVuZ3RoIC0gMV0udGltZSAhPT0gdGltZSkgewogICAgICAgICAgICAgICAgdGhpcy5jZGF0YS50aW1lLnB1c2godGltZSk7CiAgICAgICAgICAgICAgICB0aGlzLmNkYXRhLnJhaW4ucHVzaCh7IHRpbWUsIHZhbHVlOiBwcmVjaXAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY2RhdGEucmFpblt0aGlzLmNkYXRhLnJhaW4ubGVuZ3RoIC0gMV0udmFsdWUgKz0gcHJlY2lwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzbm93JykgewogICAgICAgICAgICAgIGlmICh0aGlzLmNkYXRhLnNub3cubGVuZ3RoID09PSAwIHx8IHRoaXMuY2RhdGEuc25vd1t0aGlzLmNkYXRhLnNub3cubGVuZ3RoIC0gMV0udGltZSAhPT0gdGltZSkgewogICAgICAgICAgICAgICAgdGhpcy5jZGF0YS50aW1lLnB1c2godGltZSk7CiAgICAgICAgICAgICAgICB0aGlzLmNkYXRhLnNub3cucHVzaCh7IHRpbWUsIHZhbHVlOiBwcmVjaXAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuY2RhdGEuc25vd1t0aGlzLmNkYXRhLnNub3cubGVuZ3RoIC0gMV0udmFsdWUgKz0gcHJlY2lwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuY2RhdGEpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgV2FybmluZyBpbmZvOicsIGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/echart/bottom/bottomRightChart","sourcesContent":["<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-06-09 21:08:37\n * @Description: \n-->\n<template>\n  <div>\n    <Chart :cdata=\"cdata\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Chart from './chart.vue'\nimport { mapState } from 'vuex';\nexport default {\n  data() {\n    return {\n      drawTiming: null,\n      cdata: {\n        summary: \"概要\",\n        time: [],\n        rain: [],\n        snow: [],\n      }\n    }\n  },\n  components: {\n    Chart,\n  },\n  computed: {\n    ...mapState({\n      region: state => state.region,\n    }),\n    // dataLoaded() {\n    //   return this.data1 && this.data2 && this.data3 && this.data4 && this.data5 && this.data6 && this.additionalData;\n    // }\n  },\n  watch: {\n    'region.JWD': function (newId) {\n      if (newId) {\n        //alert(\"监听到地区值改变，开始轮询数据\")\n        this.drawTimingFn(newId);\n      }\n    }\n  },\n  mounted() {\n    if (this.region.JWD) {\n      //alert(\"bottomRightChart有\")\n      this.drawTimingFn(this.region.JWD);\n    }\n  },\n  beforeDestroy() {\n    clearInterval(this.drawTiming);\n  },\n  methods: {\n    drawTimingFn(location) {\n      this.getRainInfo(location);\n      this.drawTiming = setInterval(() => {\n        this.getRainInfo(location);\n        //this.setData();\n      }, 600000);   //600000（10分钟的毫秒数）\n    },\n    setData() {\n      // 清空轮询数据\n      // this.cdata.time = ['08:00', '08:10', '08:20', '08:30', '08:40', '08:50', '09:00', '09:10', '09:20', '09:30', '09:40', '09:50'];\n      // this.cdata.rain = [2.0, 4.9, 7.0, 3.2, 5.6, 6.7, 5.6, 6.2, 3.6, 2.0, 6.4, 3.3];\n      // this.cdata.snow = [2.6, 5.9, 9.0, 6.4, 8.7, 6.7, 5.6, 8.2, 8.7, 8.8, 6.0, 2.3];\n      // 清空轮询数据\n      this.cdata.time = [];\n      this.cdata.rain = [];\n      this.cdata.snow = [];\n      let currentTime = new Date();\n      // 生成随机数据\n      for (let i = 0; i < 12; i++) {\n        // 增加10分钟\n        currentTime.setMinutes(currentTime.getMinutes() + 10);\n\n        // 获取增加后的时间\n        let hour = currentTime.getHours();\n        let minute = currentTime.getMinutes();\n        let time = `${hour}:${minute < 10 ? '0' + minute : minute}`;\n        this.cdata.time.push(time);\n\n        // 生成降雨量数据\n        let rain = (Math.random() * 15).toFixed(2);\n        this.cdata.rain.push(rain);\n\n        // 生成降雪量数据\n        let snow = (Math.random() * 15).toFixed(2);\n        this.cdata.snow.push(snow);\n      }\n\n    },\n    getRainInfo(location) {\n      //alert(\"降雨量：\" + location)\n      axios.get(`https://devapi.qweather.com/v7/minutely/5m?location=${location}&key=${this.$apiKey}`)\n        .then(response => {\n          const data = response.data;\n          console.log(\"=======降雨量======\");\n          //console.log(data);\n          this.cdata.summary = data.summary;\n          // 遍历数据并进行分类\n          data.minutely.forEach(item => {\n            const time = item.fxTime.substring(11, 16); // 提取时间的小时和分钟部分\n            const precip = parseFloat(item.precip); // 转换降水数据为浮点数\n\n            if (item.type === 'rain') {\n              if (this.cdata.rain.length === 0 || this.cdata.rain[this.cdata.rain.length - 1].time !== time) {\n                this.cdata.time.push(time);\n                this.cdata.rain.push({ time, value: precip });\n              } else {\n                this.cdata.rain[this.cdata.rain.length - 1].value += precip;\n              }\n            } else if (item.type === 'snow') {\n              if (this.cdata.snow.length === 0 || this.cdata.snow[this.cdata.snow.length - 1].time !== time) {\n                this.cdata.time.push(time);\n                this.cdata.snow.push({ time, value: precip });\n              } else {\n                this.cdata.snow[this.cdata.snow.length - 1].value += precip;\n              }\n            }\n          });\n          //console.log(this.cdata)\n        })\n        .catch(error => {\n          console.error('Error fetching Warning info:', error);\n        });\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>"]}]}