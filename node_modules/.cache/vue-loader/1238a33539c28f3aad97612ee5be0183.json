{"remainingRequest":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\vue\\screen-vue-datav\\src\\views\\bottomRight.vue?vue&type=style&index=0&id=195f56dc&prod&lang=scss&class=true","dependencies":[{"path":"E:\\code\\vue\\screen-vue-datav\\src\\views\\bottomRight.vue","mtime":1717931288159},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\css-loader\\dist\\cjs.js","mtime":1716778784199},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1716778785760},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\postcss-loader\\src\\index.js","mtime":1716778784725},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716778783793},{"path":"E:\\code\\vue\\screen-vue-datav\\node_modules\\vue-loader\\lib\\index.js","mtime":1716778785207}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiRib3gtaGVpZ2h0OiA1MjBweDsKJGJveC13aWR0aDogMTAwJTsKCiNib3R0b21SaWdodCB7CiAgcGFkZGluZzogMTRweCAxNnB4OwogIGhlaWdodDogJGJveC1oZWlnaHQ7CiAgd2lkdGg6ICRib3gtd2lkdGg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwoKICAuYmctY29sb3ItYmxhY2sgewogICAgaGVpZ2h0OiAkYm94LWhlaWdodCAtIDMwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogIH0KCiAgLnRleHQgewogICAgY29sb3I6ICNjM2NiZGU7CiAgfQoKICAuY2hhcnQtYm94IHsKICAgIG1hcmdpbi10b3A6IDE2cHg7CiAgICB3aWR0aDogMTcwcHg7CiAgICBoZWlnaHQ6IDE3MHB4OwoKICAgIC5hY3RpdmUtcmluZy1uYW1lIHsKICAgICAgcGFkZGluZy10b3A6IDEwcHg7CiAgICB9CiAgfQoKICAuYm9keS1ib3ggewogICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgICAuZHYtc2NyLWJvYXJkIHsKICAgICAgaGVpZ2h0OiAyMTBweDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["bottomRight.vue"],"names":[],"mappings":";AAwIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"bottomRight.vue","sourceRoot":"src/views","sourcesContent":["<!--\n * @Author: 洛白BG 642160753@qq.com\n * @Date: 2024-05-20 11:04:24\n * @LastEditors: 洛白BG 642160753@qq.com\n * @LastEditTime: 2024-06-09 19:08:08\n * @Description: \n-->\n<template>\n  <div id=\"bottomRight\">\n    <div class=\"bg-color-black\">\n      <div class=\"d-flex pt-2 pl-2\">\n        <span>\n          <icon name=\"chart-area\" class=\"text-icon\"></icon>\n        </span>\n        <div class=\"d-flex\">\n          <span class=\"text mx-2\">天气生活指数预报-未来两小时降雨量</span>\n\n        </div>\n      </div>\n      <div class=\"d-flex jc-center body-box\">\n        <dv-scroll-board v-if=\"flag\" class=\"dv-scr-board\" :config=\"config\" />\n      </div>\n      <BottomRightChart />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport axios from 'axios'\nimport BottomRightChart from \"@/components/echart/bottom/bottomRightChart\";\nexport default {\n  components: {\n    BottomRightChart\n  },\n  computed: {\n    ...mapState({\n      region: state => state.region,\n    }),\n  },\n  watch: {\n    'region.id': function (newId) {\n      if (newId) {\n        //alert(\"生活数据指数 监听到地区值改变，开始轮询数据:\" + newId)\n        this.getIndicesInfo(newId);\n      }\n    }\n  },\n  mounted() {\n    if (this.region.id) {\n      //alert(\"生活数据指数 有\")\n      this.getIndicesInfo(this.region.id);\n    } \n    // else {\n    //   alert(\"生活数据指数 没有\")\n    // }\n  },\n  data() {\n    return {\n      flag:false,\n      config: {\n        header: ['组件', '类型', '说明'],\n        data: [\n          // ['运动指数', \"<span class='colorGrass'>较适宜</span>\", \"属中等强度紫外线辐射天气，外出时建议涂擦SPF高于15、PA+的防晒护肤品，戴帽子、太阳镜。\"],\n          // ['洗车指数', \"<span class='colorRed'>较不宜</span>\", \"属中等强度紫外线辐射天气，外出时建议涂擦SPF高于15、PA+的防晒护肤品，戴帽子、太阳镜。\"],\n        ],\n        rowNum: 5, //表格行数\n        headerHeight: 35,\n        headerBGC: '#0f1325', //表头\n        oddRowBGC: '#0f1325', //奇数行\n        evenRowBGC: '#171c33', //偶数行\n        index: true,\n        columnWidth: [12, 110, 80, 750], // 设置列宽度\n        align: ['left', 'left', 'center', 'left']\n      }\n    }\n  },\n  methods: {\n    getIndicesInfo(location) {\n      \n      //const location = this.$store.getters.getRegionId;\n      //alert(\"生活数据指数：\"+location)\n      const colorMapping = {\n        '运动指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed' },\n        '洗车指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed' },\n        '穿衣指数': { 1: 'colorRed', 2: 'colorRed', 3: 'colorRed', 4: 'colorGrass', 5: 'colorGrass', 6: 'colorGrass', 7: 'colorRed' },\n        '钓鱼指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed' },\n        '紫外线指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '旅游指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '花粉过敏指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '舒适度指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed', 7: 'colorRed' },\n        '感冒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed' },\n        '空气污染扩散条件指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '空调开启指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed' },\n        '太阳镜指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed' },\n        '化妆指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorRed', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed', 7: 'colorRed', 8: 'colorGrass' },\n        '晾晒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed', 6: 'colorRed' },\n        '交通指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' },\n        '防晒指数': { 1: 'colorGrass', 2: 'colorGrass', 3: 'colorGrass', 4: 'colorRed', 5: 'colorRed' }\n      };\n\n      const filteredIndices = ['运动指数', '穿衣指数', '紫外线指数', '舒适度指数', '感冒指数', '晾晒指数'];\n      const livingIndex = [];\n      axios.get(`https://devapi.qweather.com/v7/indices/1d?type=0&location=${location}&key=${this.$apiKey}`)\n        .then(response => {\n          const daily = response.data.daily;\n          console.log(\"=====生活指数区=====\");\n          //console.log(daily);\n          this.config.data=[];\n          daily.forEach(item => {\n            if (colorMapping[item.name] && colorMapping[item.name][item.level]) {\n              const colorClass = colorMapping[item.name][item.level];\n              this.config.data.push([item.name, `<span class='${colorClass}'>${item.category}</span>`, item.text]);\n\n              if (filteredIndices.includes(item.name)) {\n                livingIndex.push(item.level);\n              }\n            } else {\n              console.warn(`No color mapping found for ${item.name} with level ${item.level}`);\n            }\n          });\n\n          //console.log(this.config.data)\n          this.flag = true;\n          // 存储到 Vuex\n          this.$store.commit('setLivingIndex', livingIndex);\n        })\n        .catch(error => {\n          console.error('Error fetching Indices-right info:', error);\n        });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" class>\n$box-height: 520px;\n$box-width: 100%;\n\n#bottomRight {\n  padding: 14px 16px;\n  height: $box-height;\n  width: $box-width;\n  border-radius: 5px;\n\n  .bg-color-black {\n    height: $box-height - 30px;\n    border-radius: 10px;\n  }\n\n  .text {\n    color: #c3cbde;\n  }\n\n  .chart-box {\n    margin-top: 16px;\n    width: 170px;\n    height: 170px;\n\n    .active-ring-name {\n      padding-top: 10px;\n    }\n  }\n\n  .body-box {\n    border-radius: 5px;\n    overflow: hidden;\n\n    .dv-scr-board {\n      height: 210px;\n    }\n  }\n}\n</style>"]}]}